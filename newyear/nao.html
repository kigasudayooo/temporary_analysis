<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>æ–°æ˜¥ãŠå¹´ç‰ã‚²ãƒ¼ãƒ </title>
    <style>
      body {
        font-family: "Hiragino Sans", "Meiryo", sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        margin: 0;
        background-color: #f5f5f5;
      }
      .container {
        text-align: center;
        background-color: white;
        padding: 2rem;
        border-radius: 15px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        max-width: 95%;
        width: 600px;
      }
      .mode-selector {
        display: flex;
        gap: 1rem;
        justify-content: center;
        margin-bottom: 2rem;
      }
      .mode-button {
        padding: 1rem;
        border-radius: 8px;
        border: 2px solid #ff6b6b;
        background-color: white;
        color: #ff6b6b;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: bold;
        width: 45%;
        max-width: 200px;
      }
      .mode-button.active {
        background-color: #ff6b6b;
        color: white;
      }
      .roll-button {
        font-size: 1.2rem;
        padding: 12px 24px;
        cursor: pointer;
        background-color: #ff6b6b;
        color: white;
        border: none;
        border-radius: 8px;
        margin-bottom: 1.5rem;
        transition: transform 0.2s, background-color 0.2s;
        font-weight: bold;
      }
      .roll-button:hover {
        background-color: #ff5252;
        transform: translateY(-2px);
      }
      .roll-button:active {
        transform: translateY(0);
      }
      .dice-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(60px, 1fr));
        gap: 0.8rem;
        margin: 1.5rem auto;
        max-width: 400px;
        padding: 0 1rem;
      }
      .dice {
        width: 55px;
        height: 55px;
        background-color: white;
        border: 3px solid #ff6b6b;
        border-radius: 12px;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 1.5rem;
        font-weight: bold;
        color: #ff6b6b;
        position: relative;
        margin: 0 auto;
      }
      .dice.d6 {
        border-color: #4caf50;
        color: #4caf50;
      }
      .dice.d10 {
        border-color: #2196f3;
        color: #2196f3;
      }
      @keyframes rollDice {
        0% {
          transform: rotateX(0deg) rotateY(0deg);
          opacity: 1;
        }
        50% {
          transform: rotateX(180deg) rotateY(180deg);
          opacity: 0.5;
        }
        100% {
          transform: rotateX(360deg) rotateY(360deg);
          opacity: 1;
        }
      }
      .rolling {
        animation: rollDice 0.8s ease-out;
      }
      .result {
        margin-top: 2rem;
        padding: 1rem;
        background-color: #fff9f9;
        border-radius: 8px;
      }
      .result-label {
        font-size: 1.1rem;
        color: #666;
        margin-bottom: 0.5rem;
      }
      .result-value {
        font-size: 2rem;
        font-weight: bold;
        color: #ff6b6b;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
      }
      .history {
        margin-top: 1.5rem;
        padding-top: 1rem;
        border-top: 2px dashed #eee;
      }
      .history-title {
        font-size: 1rem;
        color: #666;
        margin-bottom: 0.5rem;
      }
      .history-list {
        display: flex;
        gap: 0.5rem;
        justify-content: center;
        flex-wrap: wrap;
        font-size: 0.9rem;
        color: #888;
      }
      .history-item {
        background-color: #f8f8f8;
        padding: 0.3rem 0.8rem;
        border-radius: 15px;
      }
      .mode-description {
        margin: 1rem 0;
        padding: 1rem;
        background-color: #f8f8f8;
        border-radius: 8px;
        font-size: 0.9rem;
        color: #666;
      }
      #dice-area-simple {
        display: none;
      }
      @media (max-width: 480px) {
        .container {
          padding: 1rem;
        }
        .dice {
          width: 45px;
          height: 45px;
          font-size: 1.2rem;
        }
        .result-value {
          font-size: 1.8rem;
        }
        .mode-button {
          padding: 0.8rem;
          font-size: 0.9rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ğŸ² æ–°æ˜¥ãŠå¹´ç‰ã‚²ãƒ¼ãƒ  ğŸ²</h1>

      <div class="mode-selector">
        <button
          class="mode-button active"
          onclick="switchMode('normal')"
          id="mode-normal"
        >
          ãƒãƒè¢‹<br />ï¼‘
        </button>
        <button
          class="mode-button"
          onclick="switchMode('simple')"
          id="mode-simple"
        >
          ãƒãƒè¢‹<br />ï¼’
        </button>
      </div>

      <div class="mode-description" id="mode-description">
        6é¢ãƒ€ã‚¤ã‚¹ã‚’10å€‹æŒ¯ã£ã¦åˆè¨ˆã—ã€100å€ã—ãŸé‡‘é¡ãŒãŠå¹´ç‰ã«ãªã‚Šã¾ã™ã€‚<br />
      </div>

      <button onclick="rollDice()" id="roll-button" class="roll-button">
        ãƒ€ã‚¤ã‚¹ã‚’æŒ¯ã‚‹
      </button>

      <!-- 6é¢ãƒ€ã‚¤ã‚¹Ã—10 ãƒ¢ãƒ¼ãƒ‰ -->
      <div class="dice-container" id="dice-area-normal">
        <div class="dice d6" id="dice1">1</div>
        <div class="dice d6" id="dice2">1</div>
        <div class="dice d6" id="dice3">1</div>
        <div class="dice d6" id="dice4">1</div>
        <div class="dice d6" id="dice5">1</div>
        <div class="dice d6" id="dice6">1</div>
        <div class="dice d6" id="dice7">1</div>
        <div class="dice d6" id="dice8">1</div>
        <div class="dice d6" id="dice9">1</div>
        <div class="dice d6" id="dice10">1</div>
      </div>

      <!-- 6é¢&10é¢ãƒ€ã‚¤ã‚¹ ãƒ¢ãƒ¼ãƒ‰ -->
      <div class="dice-container" id="dice-area-simple">
        <div class="dice d6" id="simple-d6">1</div>
        <div class="dice d10" id="simple-d10-1">1</div>
        <div class="dice d10" id="simple-d10-2">1</div>
      </div>

      <div class="result">
        <div class="result-label" id="result-label">å‡ºãŸç›®ã®åˆè¨ˆ Ã— 100</div>
        <div id="result-value" class="result-value">0å††</div>
      </div>

      <div class="history">
        <div class="history-title">éå»ã®çµæœï¼ˆæœ€æ–°3å›ï¼‰</div>
        <div class="history-list" id="history-list"></div>
      </div>
    </div>

    <script>
      let currentMode = "normal";
      const history = [];
      const maxHistory = 3;
      let isRolling = false;

      function switchMode(mode) {
        if (isRolling) return;
        currentMode = mode;

        // ãƒœã‚¿ãƒ³ã®è¦‹ãŸç›®ã‚’æ›´æ–°
        document
          .getElementById("mode-normal")
          .classList.toggle("active", mode === "normal");
        document
          .getElementById("mode-simple")
          .classList.toggle("active", mode === "simple");

        // ãƒ€ã‚¤ã‚¹ã‚¨ãƒªã‚¢ã®è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ
        document.getElementById("dice-area-normal").style.display =
          mode === "normal" ? "grid" : "none";
        document.getElementById("dice-area-simple").style.display =
          mode === "simple" ? "grid" : "none";

        // èª¬æ˜æ–‡ã®æ›´æ–°
        const description =
          mode === "normal"
            ? "6é¢ãƒ€ã‚¤ã‚¹ã‚’10å€‹æŒ¯ã£ã¦åˆè¨ˆã—ã€100å€ã—ãŸé‡‘é¡ãŒãŠå¹´ç‰ã«ãªã‚Šã¾ã™"
            : "6é¢ãƒ€ã‚¤ã‚¹ã¨10é¢ãƒ€ã‚¤ã‚¹2å€‹ã®åˆè¨ˆã‚’æ›ã‘åˆã‚ã›ã€100å€ã—ãŸé‡‘é¡ãŒãŠå¹´ç‰ã«ãªã‚Šã¾ã™";
        document.getElementById("mode-description").innerHTML = description;

        // ãƒ©ãƒ™ãƒ«ã®æ›´æ–°
        document.getElementById("result-label").textContent =
          mode === "normal"
            ? "å‡ºãŸç›®ã®åˆè¨ˆ Ã— 100"
            : "(6é¢ãƒ€ã‚¤ã‚¹) Ã— (10é¢ãƒ€ã‚¤ã‚¹2å€‹ã®å’Œ) Ã— 100";

        // å±¥æ­´ã‚’ã‚¯ãƒªã‚¢
        history.length = 0;
        document.getElementById("history-list").innerHTML = "";

        // çµæœè¡¨ç¤ºã‚’ãƒªã‚»ãƒƒãƒˆ
        document.getElementById("result-value").textContent = "0å††";
      }

      function rollDice() {
        if (isRolling) return;
        isRolling = true;

        const button = document.getElementById("roll-button");
        button.disabled = true;
        button.style.opacity = "0.7";

        if (currentMode === "normal") {
          rollNormalMode();
        } else {
          rollSimpleMode();
        }
      }

      function rollNormalMode() {
        const dices = document.querySelectorAll("#dice-area-normal .dice");
        let results = [];

        dices.forEach((dice) => {
          dice.classList.add("rolling");
          setTimeout(() => {
            const result = Math.floor(Math.random() * 6) + 1;
            dice.textContent = result;
            results.push(result);
            if (results.length === 10) {
              const sum = results.reduce((a, b) => a + b, 0);
              updateResult(sum * 100);
              enableRollButton();
            }
          }, 800);

          dice.addEventListener(
            "animationend",
            () => {
              dice.classList.remove("rolling");
            },
            { once: true }
          );
        });
      }

      function rollSimpleMode() {
        const d6 = document.getElementById("simple-d6");
        const d10_1 = document.getElementById("simple-d10-1");
        const d10_2 = document.getElementById("simple-d10-2");

        d6.classList.add("rolling");
        d10_1.classList.add("rolling");
        d10_2.classList.add("rolling");

        setTimeout(() => {
          const d6Result = Math.floor(Math.random() * 6) + 1;
          const d10Result1 = Math.floor(Math.random() * 10) + 1;
          const d10Result2 = Math.floor(Math.random() * 10) + 1;

          d6.textContent = d6Result;
          d10_1.textContent = d10Result1;
          d10_2.textContent = d10Result2;

          updateResult(d6Result * (d10Result1 + d10Result2) * 100);
          enableRollButton();
        }, 800);

        [d6, d10_1, d10_2].forEach((dice) => {
          dice.addEventListener(
            "animationend",
            () => {
              dice.classList.remove("rolling");
            },
            { once: true }
          );
        });
      }

      function updateResult(amount) {
        const resultElement = document.getElementById("result-value");
        const formattedAmount = amount.toLocaleString() + "å††";
        resultElement.textContent = formattedAmount;

        history.unshift(formattedAmount);
        if (history.length > maxHistory) {
          history.pop();
        }

        const historyList = document.getElementById("history-list");
        historyList.innerHTML = history
          .map((result) => `<div class="history-item">${result}</div>`)
          .join("");
      }

      function enableRollButton() {
        isRolling = false;
        const button = document.getElementById("roll-button");
        button.disabled = false;
        button.style.opacity = "1";
      }
    </script>
  </body>
</html>
